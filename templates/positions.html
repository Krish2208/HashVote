{% extends 'admin-template.html' %} {% block content %}
<form action="/positions" , method="post">
  <div class="form-group row">
    <label for="name" class="col-sm-2 col-form-label"
      >Name of the Position</label
    >
    <div class="col-sm-10">
      <input
        required
        type="text"
        class="form-control"
        id="name"
        placeholder="Name of the Position"
        name="name"
      />
    </div>
  </div>
  <div class="form-group row">
    <!--MultiSelect List for Permission-->
    <label for="permission" class="col-sm-2 col-form-label">Permission</label>
    <div class="col-sm-10">
      <select
        required
        multiple
        class="form-control"
        id="permission"
        name="permission"
      >
        <option value="all">Select All</option>
        {% for one_branch in branch %}
        <optgroup label="{{ one_branch.name }}">
          {% for cat in one_branch.categories %}
          <option value="{{ cat }}">{{ cat }}</option>
          {% endfor %}
        </optgroup>
        {% endfor %}
      </select>
    </div>
  </div>
  <button type="submit" class="btn btn-primary">Add Position</button>
</form>
<div class="row mt-4">
  <div class="col-sm-12">
    <h3>Positions</h3>
  </div>
  <div class="col-sm-12 pt-2">
    <table class="table table-striped position-table">
      <thead>
        <tr>
          <th scope="col">Name</th>
          <th scope="col">Permissions</th>
          <th scope="col">Action</th>
        </tr>
      </thead>
      <tbody>
        {% for position in positions %}
        <tr>
          <td>{{ position.name }}</td>
          <td>
            {% for perm in position.permission %} {{ perm }}, {% endfor %}
          </td>
          <td>
            <a href="/delete/position/{{ position._id }}" class="btn btn-danger"
              >Delete</a
            >
          </td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
</div>
{% endblock %}
